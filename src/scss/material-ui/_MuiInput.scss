@use "sass:math";

.MuiInput,
.MuiFilledInput {
    &-root {
        display: inline-flex;
        flex-flow: row nowrap;
        justify-content: flex-start;
        align-items: center;
        background-color: $input-base-bg-color;
        padding: $input-base-padding-y $input-base-padding-x $input-base-padding-y;
        border-radius: $input-base-border-radius;
        box-shadow: $input-base-box-shadow;
        min-height: 4rem;

        & > * {
            z-index: 1;
        }

        &::before {
            position: absolute;
            content: '';
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: $input-base-border-radius;
            opacity: 0;
            transition: opacity 0.15s linear;
            z-index: 0;
        }

        &.Mui-focused {
            &::before {
                opacity: 1;
            }
        }

        &.MuiInputBase-colorPrimary {
            &::before {
                box-shadow: $input-base-primary-focused-box-shadow;
            }
        }

        &.MuiInputBase-colorSecondary {
            &::before {
                box-shadow: $input-base-secondary-focused-box-shadow;
            }
        }

        .MuiInputAdornment {
            $this: &;

            &-root {
                &:not(#{$this}-hiddenLabel) {
                    margin-top: 0;
                    margin-bottom: 0;
                }
            }

            &-positionEnd {
                align-self: center;
                margin: 0;
            }
        }
    }

    &-input {
        display: block;
        padding: 0;
    }
}

.MuiInput {
    &-root {
        @if $input-base-disable-hover != true {
            transition: box-shadow 0.15s linear;

            &:hover:not(&.Mui-focused) {
                box-shadow: $input-base-hover-box-shadow;
            }
        }
    }
}

.MuiFilledInput {
    $this: &;

    &-root {
        background-color: $gray-lighten-5;
        box-shadow: 0 0.2rem 0rem -0.1rem rgba($black, 0.14);
        transition: background-color 0.3s ease;

        &:hover {
            background-color: $gray-lighten-4;
        }

        &.Mui-focused {
            background-color: $input-base-bg-color;

            #{$this}-input {
                @include input-autofill(
                    $input-base-bg-color,
                    $font-family,
                    $input-base-font-size,
                    $input-base-font-weight
                );
            }
        }

        #{$this}-input {
            @include input-autofill(
                $gray-lighten-5,
                $font-family,
                $input-base-font-size,
                $input-base-font-weight
            );
        }
    }
}

.MuiInputLabel {
    $this: &;

    &-root {
        $_transform-offset-y: math.div(5.8rem, 2) -
            math.div($input-base-font-size * 0.86 * $input-base-line-height, 2);
        $_transform-offset-y: math.div(math.floor($_transform-offset-y * 10), 10);
        $_offset-x: $input-base-padding-x * 2;

        top: 0;
        line-height: $input-base-line-height;
        max-width: calc(100% - #{$_offset-x});
        transform: translate3d($input-base-padding-x, $_transform-offset-y, 0);
        transition: max-width 0.15s, transform 0.15s ease;
        z-index: 1;
        pointer-events: none;

        &#{$this}-shrink,
        &.Mui-focused,
        &.MuiFormLabel-filled {
            $_max-width-percent: (2 - 0.86) * 100;

            line-height: math.div(math.floor($input-base-line-height * 0.86 * 10), 10) + 0.05;
            max-width: calc(#{$_max-width-percent}% - #{$_offset-x});
            transform: translate3d($input-base-padding-x, $input-base-padding-y, 0)
                scale3d(0.86, 0.86, 1);
        }

        & + .MuiInputBase {
            &-root {
                align-items: flex-end;
                margin: 0;
                min-height: 5.8rem;
            }

            &-multiline {
                padding-top: $_transform-offset-y + ($input-base-padding-y * 0.86);
            }

            .MuiInputAdornment {
                &-root {
                    margin-bottom: $input-base-padding-y;
                }
            }
        }

        & ~ .MuiFormHelperText {
            &-root {
                margin-left: $input-base-padding-x;
            }
        }
    }
}
